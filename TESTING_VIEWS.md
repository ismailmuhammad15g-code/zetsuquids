# ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù…ÙŠØ²Ø© Views Tracking Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­

## âœ… Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø§Ø®ØªØ¨Ø§Ø±Ù‡Ø§

### 1. ğŸ”’ Ù…Ù†Ø¹ Ø§Ù„Ù…Ø¤Ù„Ù Ù…Ù† Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¤Ù„Ù
2. Ø§ÙØªØ­ guide Ø£Ù†Øª Ù…Ù† Ù‚Ø§Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¦Ù‡
3. Ø§Ù†Ø²Ù„ scroll Ø¥Ù„Ù‰ 85% Ø£Ùˆ Ø£ÙƒØ«Ø±

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**

```
Console: ğŸ”’ Security: Author cannot record views on their own guide
Views count: Ù„Ø§ ÙŠØ²ÙŠØ¯
```

**âœ… Ø§Ø®ØªØ¨Ø±:** [ ]

---

### 2. â° Ù…Ù†Ø¹ reload Ø§Ù„Ù…ØªÙƒØ±Ø± Ù…Ù† Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ø¹Ø§Ø¯ÙŠ (Ù„ÙŠØ³ Ø§Ù„Ù…Ø¤Ù„Ù)
2. Ø§ÙØªØ­ guide
3. Ø§Ù†Ø²Ù„ scroll Ø¥Ù„Ù‰ 85%
4. Ø§Ù†ØªØ¸Ø± 2 Ø«Ø§Ù†ÙŠØ©
5. Ø§Ø¶ØºØ· F5 (reload)
6. Ø§Ù†Ø²Ù„ scroll Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¥Ù„Ù‰ 85%
7. ÙƒØ±Ø± Ø§Ù„Ø®Ø·ÙˆØ§Øª 5-6 Ø¹Ø¯Ø© Ù…Ø±Ø§Øª

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**

```
Ø£ÙˆÙ„ Ù…Ø±Ø©: âœ… View recorded successfully!
Ø§Ù„Ù…Ø±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©: â° View already recorded. Next view allowed in X hours.
Views count: +1 ÙÙ‚Ø· (Ù„Ø§ ÙŠØ²ÙŠØ¯ Ù…Ø¹ reload)
```

**âœ… Ø§Ø®ØªØ¨Ø±:** [ ]

---

### 3. ğŸ‘¤ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ ÙŠØ´Ø§Ù‡Ø¯ guide

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ù…Ø®ØªÙ„Ù (Ù„ÙŠØ³ Ø§Ù„Ù…Ø¤Ù„Ù ÙˆÙ„Ù… ÙŠØ´Ø§Ù‡Ø¯ Ù…Ù† Ù‚Ø¨Ù„)
2. Ø§ÙØªØ­ guide
3. Ø§Ù†Ø²Ù„ scroll Ø¥Ù„Ù‰ 85%

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**

```
Console: âœ… View recorded successfully!
Views count: ÙŠØ²ÙŠØ¯ +1
localStorage: ÙŠØªÙ… Ø­ÙØ¸ timestamp
```

**âœ… Ø§Ø®ØªØ¨Ø±:** [ ]

---

### 4. ğŸ•’ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ 24-hour cooldown

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Ø¹Ø§Ø¯ÙŠ
2. Ø§ÙØªØ­ guide ÙˆØ³Ø¬Ù„ view
3. Ø§Ù†ØªØ¸Ø± 24 Ø³Ø§Ø¹Ø© + 1 Ø¯Ù‚ÙŠÙ‚Ø©
4. Ø§ÙØªØ­ Ù†ÙØ³ Ø§Ù„Ù€ guide Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
5. Ø§Ù†Ø²Ù„ scroll Ø¥Ù„Ù‰ 85%

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**

```
Ø¨Ø¹Ø¯ 24 Ø³Ø§Ø¹Ø©: âœ… View recorded successfully! (Ù…Ø±Ø© Ø£Ø®Ø±Ù‰)
Views count: ÙŠØ²ÙŠØ¯ +1
```

**âœ… Ø§Ø®ØªØ¨Ø±:** [ ] (ÙŠØªØ·Ù„Ø¨ Ø§Ù†ØªØ¸Ø§Ø± 24 Ø³Ø§Ø¹Ø©)

---

### 5. ğŸŒ Ø²Ø§Ø¦Ø± anonymous (ØºÙŠØ± Ù…Ø³Ø¬Ù„)

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. Ø§ÙØªØ­ Ø§Ù„Ù…ØªØµÙØ­ ÙÙŠ Incognito/Private mode
2. Ø§ÙØªØ­ guide (Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„)
3. Ø§Ù†Ø²Ù„ scroll Ø¥Ù„Ù‰ 85%
4. Ø§Ø¶ØºØ· F5 (reload)
5. Ø§Ù†Ø²Ù„ scroll Ù…Ø±Ø© Ø£Ø®Ø±Ù‰

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**

```
Ø£ÙˆÙ„ Ù…Ø±Ø©: âœ… View recorded successfully!
Reload: â° View already recorded. Next view allowed in X hours.
session_id: ÙŠØªÙ… Ø­ÙØ¸Ù‡ ÙÙŠ localStorage
Views count: +1 ÙÙ‚Ø·
```

**âœ… Ø§Ø®ØªØ¨Ø±:** [ ]

---

### 6. ğŸš« Ø§Ø®ØªØ¨Ø§Ø± Database Policy (RLS)

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. Ø§ÙØªØ­ Supabase Dashboard
2. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Table Editor â†’ guide_views
3. Ø­Ø§ÙˆÙ„ insert ÙŠØ¯ÙˆÙŠØ§Ù‹:

```sql
INSERT INTO guide_views (guide_id, user_id, session_id)
VALUES (
  1, -- guide_id
  'author-user-id-here', -- user_id of the author
  NULL
);
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**

```
âŒ Error: Policy violation
Message: new row violates row-level security policy
```

**âœ… Ø§Ø®ØªØ¨Ø±:** [ ]

---

### 7. ğŸ“Š Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø±Ø¶ Views Count

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. Ø§ÙØªØ­ guide Ù„Ù‡ views
2. ØªØ­Ù‚Ù‚ Ù…Ù† badge Ø§Ù„Ø£Ø²Ø±Ù‚ Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**

```
ÙŠØ¸Ù‡Ø±: ğŸ‘ï¸ X views
Format: Ù…Ø¹ comma Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙƒØ¨ÙŠØ±Ø© (1,234 views)
```

**âœ… Ø§Ø®ØªØ¨Ø±:** [ ]

---

### 8. ğŸ”„ Ø§Ø®ØªØ¨Ø§Ø± Multiple Users

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. User A: ÙŠØ´Ø§Ù‡Ø¯ guide â†’ +1
2. User B: ÙŠØ´Ø§Ù‡Ø¯ Ù†ÙØ³ Ø§Ù„Ù€ guide â†’ +1
3. User C: ÙŠØ´Ø§Ù‡Ø¯ Ù†ÙØ³ Ø§Ù„Ù€ guide â†’ +1
4. User A: ÙŠØ´Ø§Ù‡Ø¯ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ (Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©) â†’ +0
5. User B: reload â†’ +0

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**

```
Total Views: 3
ÙƒÙ„ user Ù„Ø¯ÙŠÙ‡ cooldown Ù…Ù†ÙØµÙ„
```

**âœ… Ø§Ø®ØªØ¨Ø±:** [ ]

---

## ğŸ¯ Checklist Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ

- [ ] Ø§Ù„Ù…Ø¤Ù„Ù Ù„Ø§ ÙŠØ³ØªØ·ÙŠØ¹ Ø²ÙŠØ§Ø¯Ø© views Ù„Ù€ guides Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡
- [ ] Reload Ù„Ø§ ÙŠØ²ÙŠØ¯ views
- [ ] 24-hour cooldown ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- [ ] Anonymous users Ù„Ø¯ÙŠÙ‡Ù… session tracking
- [ ] Database policy ÙŠÙ…Ù†Ø¹ Ø§Ù„Ù…Ø¤Ù„Ù
- [ ] Views count ÙŠØ¸Ù‡Ø± Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- [ ] Console messages ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…ÙÙŠØ¯Ø©
- [ ] localStorage ÙŠØ­ÙØ¸ timestamps

---

## ğŸ› ÙƒÙŠÙÙŠØ© Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Bug

Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø©:

1. **ÙˆØµÙ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
   - Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙƒÙ†Øª ØªÙØ¹Ù„Ù‡ØŸ
   - Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªÙˆÙ‚Ø¹ØªÙ‡ Ø£Ù† ÙŠØ­Ø¯Ø«ØŸ
   - Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø­Ø¯Ø« ÙØ¹Ù„ÙŠØ§Ù‹ØŸ

2. **Console Output:**

   ```
   Ø§Ù†Ø³Ø® Ø£ÙŠ Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† console
   ```

3. **localStorage Check:**

   ```javascript
   // Ø§ÙØªØ­ Console ÙˆØ§ÙƒØªØ¨:
   Object.keys(localStorage).filter((k) => k.includes("guide_view"));
   ```

4. **Database Check:**
   ```sql
   SELECT * FROM guide_views
   WHERE guide_id = YOUR_GUIDE_ID
   ORDER BY created_at DESC
   LIMIT 10;
   ```

---

## ğŸ“ Test Results Template

```markdown
## Test Date: **\_**

### Test 1: Ù…Ù†Ø¹ Ø§Ù„Ù…Ø¤Ù„Ù

- Status: [ ] Pass [ ] Fail
- Notes: **\*\***\_\_\_**\*\***

### Test 2: Ù…Ù†Ø¹ Reload

- Status: [ ] Pass [ ] Fail
- Notes: **\*\***\_\_\_**\*\***

### Test 3: Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯

- Status: [ ] Pass [ ] Fail
- Notes: **\*\***\_\_\_**\*\***

### Test 4: 24h Cooldown

- Status: [ ] Pass [ ] Fail
- Notes: **\*\***\_\_\_**\*\***

### Test 5: Anonymous

- Status: [ ] Pass [ ] Fail
- Notes: **\*\***\_\_\_**\*\***

### Test 6: Database Policy

- Status: [ ] Pass [ ] Fail
- Notes: **\*\***\_\_\_**\*\***

### Test 7: Views Display

- Status: [ ] Pass [ ] Fail
- Notes: **\*\***\_\_\_**\*\***

### Test 8: Multiple Users

- Status: [ ] Pass [ ] Fail
- Notes: **\*\***\_\_\_**\*\***
```

---

## ğŸ‰ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­

Ø¥Ø°Ø§ Ù†Ø¬Ø­Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:

```
âœ… Views Tracking System is SECURE!
âœ… No spam possible
âœ… Authors cannot inflate their own views
âœ… 24-hour cooldown working
âœ… Database protection active
âœ… All scenarios covered
```

**Ø§Ù„Ø£Ù…Ø§Ù† 100%!** ğŸ”’
